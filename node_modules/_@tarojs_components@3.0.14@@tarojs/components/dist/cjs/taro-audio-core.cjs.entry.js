'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

const core = require('./core-06196d96.js');

const Audio = class {
    constructor(hostRef) {
        core.registerInstance(this, hostRef);
        this.controls = true;
        this.autoplay = false;
        this.loop = false;
        this.muted = false;
        this.onError = core.createEvent(this, "error", 7);
        this.onPlay = core.createEvent(this, "play", 7);
        this.onPause = core.createEvent(this, "pause", 7);
        this.onTimeUpdate = core.createEvent(this, "timeupdate", 7);
        this.onEnded = core.createEvent(this, "ended", 7);
    }
    bindevent() {
        this.audio.addEventListener('timeupdate', (e) => {
            this.onTimeUpdate.emit({
                duration: e.srcElement.duration,
                currentTime: e.srcElement.duration
            });
        });
        this.audio.addEventListener('ended', () => {
            this.onEnded.emit();
        });
        this.audio.addEventListener('play', () => {
            this.onPlay.emit();
        });
        this.audio.addEventListener('pause', (e) => {
            this.onPause.emit(e);
        });
        // 1网络错误, 2解码错误, 3解码错误，4 不合适资源
        this.audio.addEventListener('error', (e) => {
            var _a;
            this.onError.emit({
                errMsg: (_a = e.srcElement.error) === null || _a === void 0 ? void 0 : _a.code
            });
        });
    }
    componentDidLoad() {
        this.bindevent();
    }
    render() {
        const { src, controls, autoplay, loop, muted } = this;
        return (core.h("audio", { src: src, controls: controls, autoplay: autoplay, loop: loop, muted: muted, ref: audio => { this.audio = audio; } }));
    }
    static get style() { return "audio{max-width:100%;outline:none}"; }
};

exports.taro_audio_core = Audio;

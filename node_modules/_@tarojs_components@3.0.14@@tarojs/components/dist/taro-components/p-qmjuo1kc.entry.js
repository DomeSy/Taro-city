import{r as t,c as i,h as s,H as r}from"./p-afb5cad8.js";import{c as o}from"./p-cff38696.js";__sc_import_taro_components("./p-72f327e1.js");const a=class{constructor(s){t(this,s),this.mode="scaleToFill",this.lazyLoad=!1,this.aspectFillMode="width",this.onLoad=i(this,"load",7),this.onError=i(this,"error",7)}componentDidLoad(){if(!this.lazyLoad)return;const t=new IntersectionObserver(i=>{i[i.length-1].isIntersecting&&(t.unobserve(this.imgRef),this.imgRef.src=this.src)},{rootMargin:"300px 0px"});t.observe(this.imgRef)}imageOnLoad(){const{width:t,height:i,naturalWidth:s,naturalHeight:r}=this.imgRef;this.onLoad.emit({width:t,height:i}),this.aspectFillMode=s>r?"width":"height"}imageOnError(){this.onError.emit()}render(){const{src:t,mode:i,lazyLoad:a,aspectFillMode:e,imageOnLoad:h,imageOnError:c}=this,n=o({"taro-img__widthfix":"widthFix"===i}),d=o(`taro-img__mode-${i.toLowerCase().replace(/\s/g,"")}`,{[`taro-img__mode-aspectfill--${e}`]:"aspectFill"===i});return s(r,{class:n},s("img",a?{ref:t=>this.imgRef=t,class:d,onLoad:h.bind(this),onError:c.bind(this)}:{ref:t=>this.imgRef=t,class:d,src:t,onLoad:h.bind(this),onError:c.bind(this)}))}static get style(){return"img[src=\"\"]{opacity:0}taro-image-core{display:inline-block;overflow:hidden;position:relative;font-size:0;width:320px;height:240px}.taro-img.taro-img__widthfix{height:100%}.taro-img__mode-scaletofill{width:100%;height:100%}.taro-img__mode-aspectfit{max-width:100%;max-height:100%}.taro-img__mode-aspectfill{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.taro-img__mode-aspectfill--width{min-width:100%;height:100%}.taro-img__mode-aspectfill--height{width:100%;min-height:100%}.taro-img__mode-top,.taro-img__mode-widthfix{width:100%}.taro-img__mode-bottom{width:100%;position:absolute;bottom:0}.taro-img__mode-left{height:100%}.taro-img__mode-right{height:100%}.taro-img__mode-right,.taro-img__mode-topright{position:absolute;right:0}.taro-img__mode-bottomleft{position:absolute;bottom:0}.taro-img__mode-bottomright{position:absolute;right:0;bottom:0}"}};export{a as taro_image_core};
System.register(["./p-7d28c317.system.js","./p-13196f99.system.js"],(function(e){"use strict";var t,r,a,n,o,i;return{setters:[function(e){t=e.h;r=e.r;a=e.c;n=e.H;o=e.g},function(e){i=e.c}],execute:function(){function s(e){return e.charAt(0)==="/"}function l(e,t){for(var r=t,a=r+1,n=e.length;a<n;r+=1,a+=1){e[r]=e[a]}e.pop()}function d(e,t){if(t===undefined)t="";var r=e&&e.split("/")||[];var a=t&&t.split("/")||[];var n=e&&s(e);var o=t&&s(t);var i=n||o;if(e&&s(e)){a=r}else if(r.length){a.pop();a=a.concat(r)}if(!a.length)return"/";var d;if(a.length){var h=a[a.length-1];d=h==="."||h===".."||h===""}else{d=false}var b=0;for(var u=a.length;u>=0;u--){var c=a[u];if(c==="."){l(a,u)}else if(c===".."){l(a,u);b++}else if(b){l(a,u);b--}}if(!i)for(;b--;b)a.unshift("..");if(i&&a[0]!==""&&(!a[0]||!s(a[0])))a.unshift("");var f=a.join("/");if(d&&f.substr(-1)!=="/")f+="/";return f}var h=function(e){var t=e||"";var r;var a={path:null,query:null,fragment:null};r=t.indexOf("#");if(r>-1){a.fragment=t.substring(r+1);t=t.substring(0,r)}r=t.indexOf("?");if(r>-1){a.query=t.substring(r+1);t=t.substring(0,r)}a.path=t;return a};var b=function(e){var r=e.index,a=r===void 0?null:r,n=e.isSelected,o=n===void 0?false:n,s=e.textColor,l=s===void 0?{}:s,d=e.iconPath,h=d===void 0?"":d,b=e.badgeText,u=b===void 0?null:b,c=e.showRedDot,f=c===void 0?false:c,v=e.text;var g=i("weui-tabbar__item",{"weui-bar__item_on":o});var p={position:"absolute",top:"-2px",right:"-13px"};var T={position:"absolute",top:"0",right:"-6px"};function B(){e.onSelect(e.index)}return t("a",{key:a,href:"javascript:;",class:g,onClick:B},t("span",{style:{display:"inline-block",position:"relative"}},t("img",{src:h,alt:"",class:"weui-tabbar__icon"}),u&&t("span",{class:"weui-badge taro-tabbar-badge",style:p},u),f&&t("span",{class:"weui-badge weui-badge_dot",style:T})),t("p",{class:"weui-tabbar__label",style:{color:l}},v))};var u=require("@tarojs/taro");var c=function(e){return e[0]==="/"?e:"/"+e};var f=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)};var v=function(e,t){return f(e,t)?e.substr(t.length):e};var g=0;var p=1;var T=2;var B="taro-tabbar__tabbar";var _="taro-tabbar__tabbar-hide";var H="taro-tabbar__tabbar-slideout";var m=e("taro_tabbar",function(){function e(e){var t=this;r(this,e);this.homePage="";this.customRoutes=[];this.tabbarPos="bottom";this.selectedIndex=-1;this.status=g;this.getOriginUrl=function(e){var r=t.customRoutes.filter((function(t){var r=t[1];var a=h(r).path;var n=h(e).path;return a===n}));return r.length?r[0][0]:e};this.getSelectedIndex=function(e){var r=-1;t.list.forEach((function(t,a){var n=t.pagePath;var o=h(e).path;var i=h(n).path;if(o===i){r=a}}));return r};this.switchTab=function(e){t.selectedIndex=e;u.navigateTo({url:t.list[e].pagePath})};this.switchTabHandler=function(e){var r=e.url,a=e.successHandler,n=e.errorHandler;var o=t.getOriginUrl(t.getCurrentUrl()||t.homePage);var i=d(r,o);var s=t.getSelectedIndex(i);if(s>-1){t.switchTab(s);a({errMsg:"switchTab:ok"})}else{n({errMsg:'switchTab:fail page "'+i+'" is not found'})}};this.routerChangeHandler=function(e){var r;var a;if(e){r=e.toLocation}if(r&&r.path){var n=c(r.path);a=n==="/"?t.homePage:n}else{a=t.getCurrentUrl()}t.selectedIndex=t.getSelectedIndex(t.getOriginUrl(a))};this.setTabBarBadgeHandler=function(e){var r=e.index,a=e.text,n=e.errorHandler;var o=t.list;if(r in o){t.list[r].showRedDot=false;t.list[r].badgeText=a}else{n({errMsg:"setTabBarBadge:fail tabbar item not found"})}};this.removeTabBarBadgeHandler=function(e){var r=e.index,a=e.successHandler,n=e.errorHandler;var o=t.list;if(r in o){t.list[r].badgeText=null;t.list[r].badgeText=null;a({errMsg:"removeTabBarBadge:ok"})}else{n({errMsg:"removeTabBarBadge:fail tabbar item not found"})}};this.showTabBarRedDotHandler=function(e){var r=e.index,a=e.successHandler,n=e.errorHandler;var o=t.list;if(r in o){o[r].badgeText=null;o[r].showRedDot=true;a({errMsg:"showTabBarRedDot:ok"})}else{n({errMsg:"showTabBarRedDot:fail tabbar item not found"})}};this.hideTabBarRedDotHandler=function(e){var r=e.index,a=e.successHandler,n=e.errorHandler;var o=t.list;if(r in o){o[r].showRedDot=false;a({errMsg:"hideTabBarRedDot:ok"})}else{n({errMsg:"hideTabBarRedDot:fail tabbar item not found"})}};this.showTabBarHandler=function(e){var r=e.successHandler;t.status=g;r({errMsg:"showTabBar:ok"})};this.hideTabBarHandler=function(e){var r=e.animation,a=e.successHandler;t.status=r?T:p;a({errMsg:"hideTabBar:ok"})};var n=this.conf.list;var o=this.conf.customRoutes;if(Object.prototype.toString.call(n)!=="[object Array]"||n.length<2||n.length>5){throw new Error("tabBar 配置错误")}this.homePage=c(this.conf.homePage);for(var i in o){this.customRoutes.push([i,o[i]])}n.forEach((function(e){if(e.pagePath.indexOf("/")!==0){e.pagePath="/"+e.pagePath}}));this.list=n;this.onLongPress=a(this,"longpress",7)}e.prototype.getCurrentUrl=function(){var e=this.conf.mode;var t=this.conf.basename||"/";var r;if(e==="hash"){var a=window.location.href;var n=a.indexOf("#");r=n===-1?"":a.substring(n+1)}else{r=location.pathname}var o=c(v(r,t));return o==="/"?this.homePage:o};e.prototype.bindEvent=function(){u.eventCenter.on("__taroRouterChange",this.routerChangeHandler);u.eventCenter.on("__taroSwitchTab",this.switchTabHandler);u.eventCenter.on("__taroSetTabBarBadge",this.setTabBarBadgeHandler);u.eventCenter.on("__taroRemoveTabBarBadge",this.removeTabBarBadgeHandler);u.eventCenter.on("__taroShowTabBarRedDotHandler",this.showTabBarRedDotHandler);u.eventCenter.on("__taroHideTabBarRedDotHandler",this.hideTabBarRedDotHandler);u.eventCenter.on("__taroShowTabBar",this.showTabBarHandler);u.eventCenter.on("__taroHideTabBar",this.hideTabBarHandler)};e.prototype.removeEvent=function(){u.eventCenter.off("__taroRouterChange",this.routerChangeHandler);u.eventCenter.off("__taroSwitchTab",this.switchTabHandler);u.eventCenter.off("__taroSetTabBarBadge",this.setTabBarBadgeHandler);u.eventCenter.off("__taroRemoveTabBarBadge",this.removeTabBarBadgeHandler);u.eventCenter.off("__taroShowTabBarRedDotHandler",this.showTabBarRedDotHandler);u.eventCenter.off("__taroHideTabBarRedDotHandler",this.hideTabBarRedDotHandler);u.eventCenter.off("__taroShowTabBarHandler",this.showTabBarHandler);u.eventCenter.off("__taroHideTabBarHandler",this.hideTabBarHandler)};e.prototype.componentDidLoad=function(){this.tabbarPos=this.tabbar.nextElementSibling?"top":"bottom";this.bindEvent();this.routerChangeHandler()};e.prototype.componentDidUnload=function(){this.removeEvent()};e.prototype.render=function(){var e,r;var a=this;var o=this,s=o.conf,l=o.tabbarPos,d=l===void 0?"bottom":l;var h=this.status;var u=i("weui-tabbar",(e={},e["taro-tabbar__border-"+(s.borderStyle||"black")]=true,e));var c=this.selectedIndex===-1||h===p;var f=h===T;return t(n,{class:i(B,B+"-"+d,(r={},r[_]=c,r[H]=f,r))},t("div",{class:u,style:{backgroundColor:s.backgroundColor||""}},this.list.map((function(e,r){var n=a.selectedIndex===r;var o;var i;if(n){o=s.selectedColor;i=e.selectedIconPath}else{o=s.color||"";i=e.iconPath}return t(b,{index:r,onSelect:a.switchTab.bind(a),isSelected:n,textColor:o,iconPath:i,text:e.text,badgeText:e.badgeText,showRedDot:e.showRedDot})}))))};Object.defineProperty(e.prototype,"tabbar",{get:function(){return o(this)},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return"#app,body,html{height:100%}.taro-tabbar__border-white:before{border-top-color:#fff!important}.taro-tabbar__container{display:-ms-flexbox;display:flex;height:100%;-ms-flex-direction:column;flex-direction:column;overflow:hidden}.taro-tabbar__panel{-ms-flex:1;flex:1;position:relative;overflow:auto;-webkit-overflow-scrolling:touch}.taro-tabbar__tabbar{position:relative;height:50px;width:100%;-webkit-transition:bottom .2s,top .2s;transition:bottom .2s,top .2s}.taro-tabbar__tabbar-top{top:0}.taro-tabbar__tabbar-bottom{bottom:0}.taro-tabbar__tabbar-hide{display:none}.taro-tabbar__tabbar-slideout{top:-52px;-ms-flex:0 0;flex:0 0}.taro-tabbar__panel+.taro-tabbar__tabbar-slideout{top:auto;bottom:-52px}"},enumerable:true,configurable:true});return e}())}}}));